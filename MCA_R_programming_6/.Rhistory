# Using the transaction list we created earlier
transactions_list <- create_retail_dataset(1500)
# Convert to a data frame suitable for CSV
convert_transactions_to_csv <- function(transactions_list, filename = "transactions.csv") {
# Create a list of transaction IDs and items
transaction_data <- data.frame()
for (i in 1:length(transactions_list)) {
transaction_id <- i
items <- transactions_list[[i]]
if (length(items) > 0) {
for (item in items) {
transaction_data <- rbind(transaction_data,
data.frame(TransactionID = transaction_id,
Item = item))
}
}
}
# Write to CSV
write.csv(transaction_data, filename, row.names = FALSE)
cat("Transactions saved to:", filename, "\n")
cat("Total transactions:", length(transactions_list), "\n")
cat("Total items:", nrow(transaction_data), "\n")
return(transaction_data)
}
# Convert and save
transaction_df <- convert_transactions_to_csv(transactions_list, "grocery_transactions.csv")
# View the first few rows
head(transaction_df)
# preparing data for apriori
# Convert to transaction format for arules
transactions <- as(transactions_list, "transactions")
set.seed(123)
create_retail_dataset <- function(n_transactions = 1000){
product_categories <- list(
breakfast = c("Bread", "Butter", "Milk", "Eggs", "Cereal", "Jam", "Coffee"),
beverages = c("Soda", "Juice", "Beer", "Wine", "Water", "Tea"),  # Fixed: removed duplicates
snacks = c("Chips", "Cookies", "Chocolate", "Nuts", "Popcorn"),  # Fixed: corrected "Chocoloate" to "Chocolate"
cooking = c("Pasta", "Rice", "Oil", "Flour", "Sugar", "Salt", "Sauce"),
personal_care = c("Shampoo", "Soap", "Toothpaste", "Deodorant"),
household = c("Detergent", "Trash Bags", "Paper Towels", "Cleaning Spray"),
frozen = c("Ice Cream", "Frozen Pizza", "Frozen Vegetables"),
health = c("Vitamins", "Pain Relievers", "Bandages")
)
# Create transaction data
transactions <- list()
for (i in 1:n_transactions) {
basket <- c()
# Define common shopping patterns
if (runif(1) < 0.3) {
# Breakfast basket
basket <- c(basket, sample(product_categories$breakfast,
sample(2:4, 1), prob = c(0.7, 0.6, 0.8, 0.5, 0.4, 0.3, 0.6)))
}
if (runif(1) < 0.4) {
# Cooking essentials
basket <- c(basket, sample(product_categories$cooking,
sample(2:3, 1), prob = c(0.6, 0.7, 0.5, 0.4, 0.3, 0.5, 0.4)))
}
if (runif(1) < 0.25) {
# Snack basket
basket <- c(basket, sample(product_categories$snacks,
sample(1:3, 1), prob = c(0.6, 0.7, 0.8, 0.4, 0.3)))
}
if (runif(1) < 0.2) {
# Personal care
basket <- c(basket, sample(product_categories$personal_care,
sample(1:2, 1), prob = c(0.5, 0.7, 0.6, 0.4)))
}
if (runif(1) < 0.15) {
# Household items
basket <- c(basket, sample(product_categories$household,
sample(1:2, 1), prob = c(0.6, 0.5, 0.7, 0.4)))
}
# Add some random items
if (runif(1) < 0.3) {
all_products <- unlist(product_categories)
basket <- c(basket, sample(all_products, sample(1:2, 1)))
}
transactions[[i]] <- unique(basket)
}
return(transactions)
}
# Create the dataset once and store it
transactions_list <- create_retail_dataset(1500)
# Convert to a data frame suitable for CSV
convert_transactions_to_csv <- function(transactions_list, filename = "transactions.csv") {
# Create a list of transaction IDs and items
transaction_data <- data.frame()
for (i in 1:length(transactions_list)) {
transaction_id <- i
items <- transactions_list[[i]]
if (length(items) > 0) {
for (item in items) {
transaction_data <- rbind(transaction_data,
data.frame(TransactionID = transaction_id,
Item = item))
}
}
}
# Write to CSV
write.csv(transaction_data, filename, row.names = FALSE)
cat("Transactions saved to:", filename, "\n")
cat("Total transactions:", length(transactions_list), "\n")
cat("Total items:", nrow(transaction_data), "\n")
return(transaction_data)
}
# Convert and save (this doesn't affect transactions_list)
transaction_df <- convert_transactions_to_csv(transactions_list, "grocery_transactions.csv")
# View the first few rows
head(transaction_df)
# FIXED: Convert the ORIGINAL transactions_list to transactions format
# Don't recreate transactions_list after this point
transactions <- as(transactions_list, "transactions")
create_sample_dataset <- function(filename = "apriori_data.csv") {
# Create sample grocery transaction data
set.seed(123)
# Sample products
products <- c("Milk", "Bread", "Butter", "Eggs", "Cheese", "Yogurt",
"Apple", "Banana", "Orange", "Tomato", "Potato", "Onion",
"Chicken", "Beef", "Fish", "Rice", "Pasta", "Cereal",
"Coffee", "Tea", "Juice", "Soda", "Water", "Beer",
"Shampoo", "Soap", "Toothpaste", "Detergent")
# Generate transactions
transactions_data <- data.frame()
transaction_id <- 1
# Create 100 transactions
for(i in 1:100) {
# Random number of items per transaction (2-6 items)
n_items <- sample(2:6, 1)
items <- sample(products, n_items, prob = runif(length(products), 0.3, 1))
for(item in items) {
transactions_data <- rbind(transactions_data,
data.frame(Transaction = transaction_id,
Product = item))
}
transaction_id <- transaction_id + 1
}
write.csv(transactions_data, filename, row.names = FALSE)
cat("Sample dataset created:", filename, "\n")
cat("Total transactions:", max(transactions_data$Transaction), "\n")
cat("Total records:", nrow(transactions_data), "\n")
return(transactions_data)
}
create_sample_dataset()
list.files()
library(arules)
# Function to get user input for parameters
get_apriori_parameters <- function() {
cat("=== APRIORI ALGORITHM PARAMETER INPUT ===\n\n")
# Get support value
support <- as.numeric(readline(prompt = "Enter minimum support (0.0 to 1.0, e.g., 0.5 for 50%): "))
while(is.na(support) || support < 0 || support > 1) {
cat("Invalid input! Please enter a number between 0 and 1.\n")
support <- as.numeric(readline(prompt = "Enter minimum support (0.0 to 1.0): "))
}
# Get confidence value
confidence <- as.numeric(readline(prompt = "Enter minimum confidence (0.0 to 1.0, e.g., 0.7 for 70%): "))
while(is.na(confidence) || confidence < 0 || confidence > 1) {
cat("Invalid input! Please enter a number between 0 and 1.\n")
confidence <- as.numeric(readline(prompt = "Enter minimum confidence (0.0 to 1.0): "))
}
# Get minlen value
minlen <- as.integer(readline(prompt = "Enter minimum rule length (e.g., 2 for pairs): "))
while(is.na(minlen) || minlen < 1) {
cat("Invalid input! Please enter a positive integer.\n")
minlen <- as.integer(readline(prompt = "Enter minimum rule length: "))
}
# Get maxlen value
maxlen <- as.integer(readline(prompt = "Enter maximum rule length (e.g., 3): "))
while(is.na(maxlen) || maxlen < minlen) {
cat("Invalid input! Please enter an integer greater than or equal to minimum length.\n")
maxlen <- as.integer(readline(prompt = "Enter maximum rule length: "))
}
return(list(
support = support,
confidence = confidence,
minlen = minlen,
maxlen = maxlen
))
}
# Check if file exists, if not create sample data
if(!file.exists("apriori_data.csv")) {
cat("apriori_data.csv not found. Creating sample dataset...\n")
create_sample_dataset()
}
ap_data <- read.csv("apriori_data.csv")
# Peek into data
cat("First few rows of the dataset:\n")
head(ap_data)
cat("\nDataset summary:\n")
cat("Number of transactions:", length(unique(ap_data$Transaction)), "\n")
cat("Number of unique products:", length(unique(ap_data$Product)), "\n")
cat("Total records:", nrow(ap_data), "\n\n")
# Convert to transactions
trans <- split(ap_data$Product, ap_data$Transaction)
trans <- as(trans, "transactions")
cat("Transactions summary:\n")
summary(trans)
# Get parameters from user
params <- get_apriori_parameters()
library(arules)
# Function to get user input for parameters
get_apriori_parameters <- function() {
cat("=== APRIORI ALGORITHM PARAMETER INPUT ===\n\n")
# Get support value
support <- as.numeric(readline(prompt = "Enter minimum support (0.0 to 1.0, e.g., 0.5 for 50%): "))
while(is.na(support) || support < 0 || support > 1) {
cat("Invalid input! Please enter a number between 0 and 1.\n")
support <- as.numeric(readline(prompt = "Enter minimum support (0.0 to 1.0): "))
}
# Get confidence value
confidence <- as.numeric(readline(prompt = "Enter minimum confidence (0.0 to 1.0, e.g., 0.7 for 70%): "))
while(is.na(confidence) || confidence < 0 || confidence > 1) {
cat("Invalid input! Please enter a number between 0 and 1.\n")
confidence <- as.numeric(readline(prompt = "Enter minimum confidence (0.0 to 1.0): "))
}
# Get minlen value
minlen <- as.integer(readline(prompt = "Enter minimum rule length (e.g., 2 for pairs): "))
while(is.na(minlen) || minlen < 1) {
cat("Invalid input! Please enter a positive integer.\n")
minlen <- as.integer(readline(prompt = "Enter minimum rule length: "))
}
# Get maxlen value
maxlen <- as.integer(readline(prompt = "Enter maximum rule length (e.g., 3): "))
while(is.na(maxlen) || maxlen < minlen) {
cat("Invalid input! Please enter an integer greater than or equal to minimum length.\n")
maxlen <- as.integer(readline(prompt = "Enter maximum rule length: "))
}
return(list(
support = support,
confidence = confidence,
minlen = minlen,
maxlen = maxlen
))
}
# Check if file exists, if not create sample data
if(!file.exists("apriori_data.csv")) {
cat("apriori_data.csv not found. Creating sample dataset...\n")
create_sample_dataset()
}
ap_data <- read.csv("apriori_data.csv")
# Peek into data
cat("First few rows of the dataset:\n")
head(ap_data)
cat("\nDataset summary:\n")
cat("Number of transactions:", length(unique(ap_data$Transaction)), "\n")
cat("Number of unique products:", length(unique(ap_data$Product)), "\n")
cat("Total records:", nrow(ap_data), "\n\n")
# Convert to transactions
trans <- split(ap_data$Product, ap_data$Transaction)
trans <- as(trans, "transactions")
cat("Transactions summary:\n")
summary(trans)
# Get parameters from user
params <- get_apriori_parameters()
# Apply Apriori algorithm with user parameters
cat("\nRunning Apriori algorithm with your parameters...\n")
rules <- apriori(trans,
parameter = list(
support = params$support,
confidence = params$confidence,
minlen = params$minlen,
maxlen = params$maxlen
))
# Show results
cat("Number of rules found:", length(rules), "\n\n")
if(length(rules) > 0) {
# Display rules sorted by confidence
rules_sorted <- sort(rules, by = "confidence", decreasing = TRUE)
cat("Top association rules (sorted by confidence):\n")
inspect(rules_sorted)
# Additional insights
cat("\n=== ADDITIONAL INSIGHTS ===\n")
cat("Rules by different metrics:\n\n")
# Top by lift
rules_by_lift <- sort(rules, by = "lift", decreasing = TRUE)
cat("Top 5 rules by LIFT (strength of association):\n")
inspect(head(rules_by_lift, 5))
# Top by support
rules_by_support <- sort(rules, by = "support", decreasing = TRUE)
cat("\nTop 5 rules by SUPPORT (frequency):\n")
inspect(head(rules_by_support, 5))
} else {
cat("No rules found with the current parameters.\n")
cat("Try lowering support or confidence values.\n")
}
# Get parameters from user
params <- get_apriori_parameters()
# Apply Apriori algorithm with user parameters
cat("\nRunning Apriori algorithm with your parameters...\n")
rules <- apriori(trans,
parameter = list(
support = params$support,
confidence = params$confidence,
minlen = params$minlen,
maxlen = params$maxlen
))
# Show results
cat("Number of rules found:", length(rules), "\n\n")
# Get parameters from user
params <- get_apriori_parameters()
# Apply Apriori algorithm with user parameters
cat("\nRunning Apriori algorithm with your parameters...\n")
rules <- apriori(trans,
parameter = list(
support = params$support,
confidence = params$confidence,
minlen = params$minlen,
maxlen = params$maxlen
))
# Show results
cat("Number of rules found:", length(rules), "\n\n")
if(length(rules) > 0) {
# Display rules sorted by confidence
rules_sorted <- sort(rules, by = "confidence", decreasing = TRUE)
cat("Top association rules (sorted by confidence):\n")
inspect(rules_sorted)
# Additional insights
cat("\n=== ADDITIONAL INSIGHTS ===\n")
cat("Rules by different metrics:\n\n")
# Top by lift
rules_by_lift <- sort(rules, by = "lift", decreasing = TRUE)
cat("Top 5 rules by LIFT (strength of association):\n")
inspect(head(rules_by_lift, 5))
# Top by support
rules_by_support <- sort(rules, by = "support", decreasing = TRUE)
cat("\nTop 5 rules by SUPPORT (frequency):\n")
inspect(head(rules_by_support, 5))
} else {
cat("No rules found with the current parameters.\n")
cat("Try lowering support or confidence values.\n")
}
# Get parameters from user
params <- get_apriori_parameters()
# Apply Apriori algorithm with user parameters
cat("\nRunning Apriori algorithm with your parameters...\n")
rules <- apriori(trans,
parameter = list(
support = params$support,
confidence = params$confidence,
minlen = params$minlen,
maxlen = params$maxlen
))
# Show results
cat("Number of rules found:", length(rules), "\n\n")
if(length(rules) > 0) {
# Display rules sorted by confidence
rules_sorted <- sort(rules, by = "confidence", decreasing = TRUE)
cat("Top association rules (sorted by confidence):\n")
inspect(rules_sorted)
# Additional insights
cat("\n=== ADDITIONAL INSIGHTS ===\n")
cat("Rules by different metrics:\n\n")
# Top by lift
rules_by_lift <- sort(rules, by = "lift", decreasing = TRUE)
cat("Top 5 rules by LIFT (strength of association):\n")
inspect(head(rules_by_lift, 5))
# Top by support
rules_by_support <- sort(rules, by = "support", decreasing = TRUE)
cat("\nTop 5 rules by SUPPORT (frequency):\n")
inspect(head(rules_by_support, 5))
} else {
cat("No rules found with the current parameters.\n")
cat("Try lowering support or confidence values.\n")
}
library(arules)
get_apriori_parameters <- function() {
cat("=== APRIORI ALGORITHM PARAMETER INPUT ===\n\n")
# Get support value
support <- as.numeric(readline(prompt = "Enter minimum support (0.0 to 1.0, e.g., 0.5 for 50%): "))
while(is.na(support) || support < 0 || support > 1) {
cat("Invalid input! Please enter a number between 0 and 1.\n")
support <- as.numeric(readline(prompt = "Enter minimum support (0.0 to 1.0): "))
}
# Get confidence value
confidence <- as.numeric(readline(prompt = "Enter minimum confidence (0.0 to 1.0, e.g., 0.7 for 70%): "))
while(is.na(confidence) || confidence < 0 || confidence > 1) {
cat("Invalid input! Please enter a number between 0 and 1.\n")
confidence <- as.numeric(readline(prompt = "Enter minimum confidence (0.0 to 1.0): "))
}
# Get minlen value
minlen <- as.integer(readline(prompt = "Enter minimum rule length (e.g., 2 for pairs): "))
while(is.na(minlen) || minlen < 1) {
cat("Invalid input! Please enter a positive integer.\n")
minlen <- as.integer(readline(prompt = "Enter minimum rule length: "))
}
# Get maxlen value
maxlen <- as.integer(readline(prompt = "Enter maximum rule length (e.g., 3): "))
while(is.na(maxlen) || maxlen < minlen) {
cat("Invalid input! Please enter an integer greater than or equal to minimum length.\n")
maxlen <- as.integer(readline(prompt = "Enter maximum rule length: "))
}
return(list(
support = support,
confidence = confidence,
minlen = minlen,
maxlen = maxlen
))
}
if(!file.exists("apriori_data.csv")) {
cat("apriori_data.csv not found. Creating sample dataset...\n")
create_sample_dataset()
}
ap_data <- read.csv("apriori_data.csv")
cat("First few rows of the dataset:\n")
head(ap_data)
cat("\nDataset summary:\n")
cat("Number of transactions:", length(unique(ap_data$Transaction)), "\n")
cat("Number of unique products:", length(unique(ap_data$Product)), "\n")
cat("Total records:", nrow(ap_data), "\n\n")
trans <- split(ap_data$Product, ap_data$Transaction)
trans <- as(trans, "transactions")
cat("Transactions summary:\n")
summary(trans)
params <- get_apriori_parameters()
if(!file.exists("apriori_data.csv")) {
cat("apriori_data.csv not found. Creating sample dataset...\n")
create_sample_dataset()
}
ap_data <- read.csv("apriori_data.csv")
cat("First few rows of the dataset:\n")
head(ap_data)
cat("\nDataset summary:\n")
cat("Number of transactions:", length(unique(ap_data$Transaction)), "\n")
cat("Number of unique products:", length(unique(ap_data$Product)), "\n")
cat("Total records:", nrow(ap_data), "\n\n")
trans <- split(ap_data$Product, ap_data$Transaction)
trans <- as(trans, "transactions")
cat("Transactions summary:\n")
summary(trans)
params <- get_apriori_parameters()
library(arules)
metadata<- "raviraj"
get_apriori_parameters <- function() {
cat("=== APRIORI ALGORITHM PARAMETER INPUT ===\n\n")
# Get support value
support <- as.numeric(readline(prompt = "Enter minimum support (0.0 to 1.0, e.g., 0.5 for 50%): "))
while(is.na(support) || support < 0 || support > 1) {
cat("Invalid input! Please enter a number between 0 and 1.\n")
support <- as.numeric(readline(prompt = "Enter minimum support (0.0 to 1.0): "))
}
# Get confidence value
confidence <- as.numeric(readline(prompt = "Enter minimum confidence (0.0 to 1.0, e.g., 0.7 for 70%): "))
while(is.na(confidence) || confidence < 0 || confidence > 1) {
cat("Invalid input! Please enter a number between 0 and 1.\n")
confidence <- as.numeric(readline(prompt = "Enter minimum confidence (0.0 to 1.0): "))
}
# Get minlen value
minlen <- as.integer(readline(prompt = "Enter minimum rule length (e.g., 2 for pairs): "))
while(is.na(minlen) || minlen < 1) {
cat("Invalid input! Please enter a positive integer.\n")
minlen <- as.integer(readline(prompt = "Enter minimum rule length: "))
}
# Get maxlen value
maxlen <- as.integer(readline(prompt = "Enter maximum rule length (e.g., 3): "))
while(is.na(maxlen) || maxlen < minlen) {
cat("Invalid input! Please enter an integer greater than or equal to minimum length.\n")
maxlen <- as.integer(readline(prompt = "Enter maximum rule length: "))
}
return(list(
support = support,
confidence = confidence,
minlen = minlen,
maxlen = maxlen
))
}
if(!file.exists("apriori_data.csv")) {
cat("apriori_data.csv not found. Creating sample dataset...\n")
create_sample_dataset()
}
ap_data <- read.csv("apriori_data.csv")
cat("First few rows of the dataset:\n")
head(ap_data)
cat("\nDataset summary:\n")
cat("Number of transactions:", length(unique(ap_data$Transaction)), "\n")
cat("Number of unique products:", length(unique(ap_data$Product)), "\n")
cat("Total records:", nrow(ap_data), "\n\n")
trans <- split(ap_data$Product, ap_data$Transaction)
trans <- as(trans, "transactions")
cat("Transactions summary:\n")
summary(trans)
params <- get_apriori_parameters()
cat("\nRunning Apriori algorithm with your parameters...\n")
rules <- apriori(trans,
parameter = list(
support = params$support,
confidence = params$confidence,
minlen = params$minlen,
maxlen = params$maxlen
))
# results
cat("Number of rules found:", length(rules), "\n\n")
if(length(rules) > 0) {
# Display rules sorted by confidence
rules_sorted <- sort(rules, by = "confidence", decreasing = TRUE)
cat("Top association rules (sorted by confidence):\n")
inspect(rules_sorted)
# Additional insights
cat("\nADDITIONAL INSIGHTS->\n")
cat("Rules by different metrics:\n\n")
# Top by lift
rules_by_lift <- sort(rules, by = "lift", decreasing = TRUE)
cat("Top 5 rules by LIFT (strength of association):\n")
inspect(head(rules_by_lift, 5))
# Top by support
rules_by_support <- sort(rules, by = "support", decreasing = TRUE)
cat("\nTop 5 rules by SUPPORT (frequency):\n")
inspect(head(rules_by_support, 5))
} else {
cat("No rules found with the current parameters.\n")
cat("Try lowering support or confidence values.\n")
}
